{% extends "base.html" %}
{% block content %}

<h1>{{ 'Editar usuário' if user else 'Novo usuário' }}</h1>

{# Exibe mensagens flash (opcional; caso já exista no base, pode remover) #}
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <ul>
      {% for category, message in messages %}
        <li class="{{ category }}">{{ message }}</li>
      {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

<form method="post"
      action="{{ url_for('users.create') if not user else url_for('users.edit', user_id=user.id) }}">

  <label for="nome">Nome</label>
  <input id="nome" name="nome"
         value="{{ (form_data.nome if form_data is defined and form_data.nome is not none else (user.nome if user else '')) }}"
         required>

  <label for="email">Email</label>
  <input id="email" type="email" name="email"
         value="{{ (form_data.email if form_data is defined and form_data.email is not none else (user.email if user else '')) }}"
         required>

  <label for="role">Perfil</label>
  <input id="role" name="role"
         value="{{ (form_data.role if form_data is defined and form_data.role is not none else (user.role if user else 'aluno')) }}">

  <label for="password">Senha (opcional)</label>
  <input id="password" type="password" name="password" placeholder="Nova senha (opcional)">

  <button type="submit">{{ 'Atualizar' if user else 'Salvar' }}</button>
  <a href="{{ url_for('users.index') }}">Voltar</a>
</form>

{% endblock %}
